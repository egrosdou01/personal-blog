"use strict";(self.webpackChunkpersonal_blog=self.webpackChunkpersonal_blog||[]).push([[6523],{6935:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var s=n(4848),i=n(8453);const l={slug:"sveltos-templating-cilium-cluster-mesh",title:"Sveltos Templating: Cilium Cluster Mesh in One Run",authors:["egrosdou01"],date:new Date("2024-08-10T00:00:00.000Z"),image:"./Sveltos_Templating_Cilium.jpg",tags:["sveltos","cilium","open-source","kubernetes","gitops","devops","2024"]},o=void 0,r={permalink:"/personal-blog/blog/sveltos-templating-cilium-cluster-mesh",source:"@site/blog/2024-08-10-sveltos-dynamic-templating/sveltos_dynamic_templating.md",title:"Sveltos Templating: Cilium Cluster Mesh in One Run",description:"Introduction",date:"2024-08-10T00:00:00.000Z",tags:[{inline:!1,label:"Sveltos",permalink:"/personal-blog/blog/tags/sveltos",description:"Open source project Sveltos"},{inline:!1,label:"Cilium",permalink:"/personal-blog/blog/tags/cilium",description:"eBPF-based Networking, Security, and Observability for Kubernetes"},{inline:!1,label:"Open Source",permalink:"/personal-blog/blog/tags/open-source",description:"Open source software"},{inline:!1,label:"Kubernetes",permalink:"/personal-blog/blog/tags/kubernetes",description:"Container orchestration platform for automating application deployment, scaling, and management"},{inline:!1,label:"GitOps",permalink:"/personal-blog/blog/tags/gitops",description:"Operational framework that uses Git as a single source of truth for declarative infrastructure and applications"},{inline:!1,label:"DevOps",permalink:"/personal-blog/blog/tags/devops",description:"Set of practices that combines software development and IT operations"},{inline:!1,label:"2024",permalink:"/personal-blog/blog/tags/2024",description:"The year the post went online"}],readingTime:7.57,hasTruncateMarker:!0,authors:[{name:"Eleni Grosdouli",title:"DevOps Consulting Engineer at Cisco Systems",url:"https://github.com/egrosdou01",imageURL:"https://github.com/egrosdou01.png",key:"egrosdou01"}],frontMatter:{slug:"sveltos-templating-cilium-cluster-mesh",title:"Sveltos Templating: Cilium Cluster Mesh in One Run",authors:["egrosdou01"],date:"2024-08-10T00:00:00.000Z",image:"./Sveltos_Templating_Cilium.jpg",tags:["sveltos","cilium","open-source","kubernetes","gitops","devops","2024"]},unlisted:!1,prevItem:{title:"OpenTofu: RKE2 Cluster with Cilium on Azure",permalink:"/personal-blog/blog/opentofu-rke2-cilium-azure"},nextItem:{title:"Rancher RKE2 Cluster on Azure",permalink:"/personal-blog/blog/rancher-rke2-cilium-azure"}},a={image:n(2559).A,authorsImageUrls:[void 0]},c=[{value:"Introduction",id:"introduction",level:2},{value:"Lab Setup",id:"lab-setup",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Register Clusters with\xa0Sveltos",id:"step-1-register-clusters-withsveltos",level:2},{value:"Example - mesh01 registration",id:"example---mesh01-registration",level:3},{value:"Validation",id:"validation",level:3},{value:"Step 2: Deploy Cilium Cluster Mesh ConfigMap",id:"step-2-deploy-cilium-cluster-mesh-configmap",level:2},{value:"Example - mesh01 ConfigMap",id:"example---mesh01-configmap",level:3},{value:"Deploy ConfigMap Management Cluster",id:"deploy-configmap-management-cluster",level:3},{value:"Step 3: Deploy Sveltos ClusterProfile",id:"step-3-deploy-sveltos-clusterprofile",level:2},{value:"Example - mesh01 ClusterProfile",id:"example---mesh01-clusterprofile",level:3},{value:"Deploy ClusterProfile Management Cluster",id:"deploy-clusterprofile-management-cluster",level:3},{value:"Step 4: Validate Results",id:"step-4-validate-results",level:2},{value:"Validation - sveltosctl",id:"validation---sveltosctl",level:3},{value:"Validation - mesh01",id:"validation---mesh01",level:3},{value:"Validation - mesh02",id:"validation---mesh02",level:3},{value:"Sveltos Templating Benefits",id:"sveltos-templating-benefits",level:2},{value:"Conclusions",id:"conclusions",level:2},{value:"\u2709\ufe0f Contact",id:"\ufe0f-contact",level:2},{value:"\ud83d\udc4f Support this\xa0project",id:"-support-thisproject",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(t.p,{children:["Have you ever wondered how to dynamically instantiate Kubernetes resources before deploying them to a cluster? What if I tell you there is an easy way to do it? ",(0,s.jsx)(t.a,{href:"https://github.com/projectsveltos",children:"Sveltos"})," lets you define add-ons and applications using ",(0,s.jsx)(t.a,{href:"https://projectsveltos.github.io/sveltos/template/intro_template/",children:"templates"}),". Before deploying any resource down the ",(0,s.jsx)(t.strong,{children:"managed"})," clusters, Sveltos instantiates the templates using information gathered from the ",(0,s.jsx)(t.strong,{children:"management"})," cluster."]}),"\n",(0,s.jsxs)(t.p,{children:["In a ",(0,s.jsx)(t.a,{href:"/personal-blog/blog/cilium-cluster-mesh-rke2",children:"previous post"}),", we outlined a step-by-step approach to forming a ",(0,s.jsx)(t.a,{href:"https://docs.cilium.io/en/v1.15/network/clustermesh/clustermesh/",children:"Cilium cluster mesh"})," between two clusters. In today's post, we will demonstrate how the Sveltos templating is used to deploy a Cilium cluster mesh dynamically in ",(0,s.jsx)(t.strong,{children:"one go"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"title image reading &quot;Sveltos Templating Cilium&quot;",src:n(8208).A+"",width:"5364",height:"2982"})}),"\n",(0,s.jsx)(t.h2,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"+-----------------+-------------------+--------------------------+\n|   Cluster Name  |        Type       |         Version          |\n+-----------------+-------------------+--------------------------+\n|   mgmt          | Mgmt Cluster      |      v1.28.9+rke2r1      |\n|  mesh01         | Managed Cluster   |      v1.29.2+k3s1        |\n|  mesh02         | Managed Cluster   |      v1.29.2+k3s1        |\n+-----------------+-------------------+--------------------------+\n\n+-------------+----------+\n|  Deployment | Version  |\n+-------------+----------+\n|    Cilium   | v1.15.6  |\n|  sveltosctl | v0.32.0  |\n+-------------+----------+\n"})}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.p,{children:"To follow along, ensure the below are satisfied."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"A management cluster with Sveltos installed"}),"\n",(0,s.jsx)(t.li,{children:"kubectl installed"}),"\n",(0,s.jsx)(t.li,{children:"sveltosctl installed"}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["If you are unaware of how to install Sveltos in a Kubernetes cluster, follow the instructions mentioned ",(0,s.jsx)(t.a,{href:"https://projectsveltos.github.io/sveltos/getting_started/install/install/",children:"here"}),"."]})}),"\n",(0,s.jsx)(t.h2,{id:"step-1-register-clusters-withsveltos",children:"Step 1: Register Clusters with\xa0Sveltos"}),"\n",(0,s.jsxs)(t.p,{children:["For this demonstration the ",(0,s.jsx)(t.a,{href:"https://www.civo.com/kubernetes",children:"Civo Kubernetes"})," cluster offering was used. Once the clusters are ready, it is time to proceed with the Sveltos cluster registration. To do that, we will utilise ",(0,s.jsx)(t.code,{children:"sveltosctl"})," and generate a new kubeconfig file."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ sveltosctl register cluster --namespace=<namespace> --cluster=<cluster name> \\\n    --kubeconfig=<path to Sveltos file with Kubeconfig> \\\n    --labels=key=value\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example---mesh01-registration",children:"Example - mesh01 registration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ sveltosctl register cluster --namespace=civo --cluster=mesh01 \\\n    --kubeconfig=/home/test/mesh01.yaml \\\n    --labels=cilium=zone01\n"})}),"\n",(0,s.jsxs)(t.p,{children:["We will register the clusters with Sveltos on the mentioned ",(0,s.jsx)(t.strong,{children:"namespace"}),", ",(0,s.jsx)(t.strong,{children:"name"}),", and will attach the cluster ",(0,s.jsx)(t.strong,{children:"labels"})," ",(0,s.jsx)(t.code,{children:"cilium=zone01"})," and ",(0,s.jsx)(t.code,{children:"cilium=zone02"})," respectively."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:"If the namespace does not exist in the management cluster, the command will fail with the namespace not found error. Ensure the defined namespace exists in the cluster before registration."})}),"\n",(0,s.jsx)(t.h3,{id:"validation",children:"Validation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ export KUBECONFIG=<Sveltos managament cluster>\n\n$ kubectl get sveltoscluster -A --show-labels\nNAMESPACE   NAME     READY   VERSION          LABELS\ncivo        mesh01   true    v1.29.2+k3s1     cilium=zone01\ncivo        mesh02   true    v1.29.2+k3s1     cilium=zone02\nmgmt        mgmt     true    v1.28.9+rke2r1   sveltos-agent=present\n"})}),"\n",(0,s.jsx)(t.h2,{id:"step-2-deploy-cilium-cluster-mesh-configmap",children:"Step 2: Deploy Cilium Cluster Mesh ConfigMap"}),"\n",(0,s.jsxs)(t.p,{children:["Before we even start working with the Sveltos templating, we will deploy two ",(0,s.jsx)(t.code,{children:"ConfigMap"})," resources that include the Cilium Cluster Mesh configuration."]}),"\n",(0,s.jsx)(t.h3,{id:"example---mesh01-configmap",children:"Example - mesh01 ConfigMap"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: cilium-config-mesh01\n  namespace: civo\ndata:\n  id: "1"\n  k8sServiceHost: "74.220.x.x"\n  k8sServicePort: "6443"\n  nodePort: "32379"\n  crt: "Define the base64 ca.crt"\n  key: "Define the base64 ca.key"\n  clusterPoolIPv4PodCIDRList: "10.244.0.0/16"\n  peermeshname: "mesh02"\n  peermeship: "192.168.x.x"\n  peermeshport: "32380"\n'})}),"\n",(0,s.jsxs)(t.p,{children:["From the YAML definition, it is clear the resources we would like to deploy are in a key-value format. The ",(0,s.jsx)(t.code,{children:"ConfigMap"})," for both clusters contains the required information to form a ",(0,s.jsx)(t.a,{href:"https://cilium.io/use-cases/cluster-mesh/",children:"Cilium cluster mesh"})," seamlessly."]}),"\n",(0,s.jsx)(t.h3,{id:"deploy-configmap-management-cluster",children:"Deploy ConfigMap Management Cluster"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ export KUBECONFIG=<Sveltos managament cluster> \n\n$ kubectl apply -f config_mesh01.yaml,config_mesh02.yaml\n\n$ kubectl get cm -n civo\nNAME                   DATA   AGE\ncilium-config-mesh01   10     9s\ncilium-config-mesh02   10     5s\nkube-root-ca.crt       1      23m\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["As the Kubernetes managed clusters are registered in the ",(0,s.jsx)(t.code,{children:"civo"})," namespace, the ",(0,s.jsx)(t.code,{children:"ConfigMaps"})," are defined there."]})}),"\n",(0,s.jsx)(t.h2,{id:"step-3-deploy-sveltos-clusterprofile",children:"Step 3: Deploy Sveltos ClusterProfile"}),"\n",(0,s.jsxs)(t.p,{children:["We will create a Sveltos ",(0,s.jsx)(t.a,{href:"https://projectsveltos.github.io/sveltos/features/set/#referencing-clustersetset-in-a-clusterprofileprofile",children:"ClusterProfile"})," to install ",(0,s.jsx)(t.strong,{children:"Cilium"})," as a ",(0,s.jsx)(t.strong,{children:"CNI"})," alongside the ",(0,s.jsx)(t.strong,{children:"Hubble UI"})," and ",(0,s.jsx)(t.strong,{children:"Cilium cluster mesh"})," by instantiating the configuration from the information located in the ",(0,s.jsx)(t.code,{children:"ConfigMap"})," created in previous step."]}),"\n",(0,s.jsx)(t.h3,{id:"example---mesh01-clusterprofile",children:"Example - mesh01 ClusterProfile"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'apiVersion: config.projectsveltos.io/v1beta1\nkind: ClusterProfile\nmetadata:\n  name: cilium-1156-zone01\nspec:\n  clusterSelector:\n    matchLabels:\n      cilium: zone01\n  templateResourceRefs:\n  - resource:\n      apiVersion: v1\n      kind: ConfigMap\n      name: cilium-config-{{ .Cluster.metadata.name }}\n    identifier: CiliumConfig\n  helmCharts:\n  - chartName: cilium/cilium\n    chartVersion: 1.15.6\n    helmChartAction: Install\n    releaseName: cilium\n    releaseNamespace: kube-system\n    repositoryName: cilium\n    repositoryURL: https://helm.cilium.io/\n    values: |\n      tls:\n        ca:\n          cert: {{ (getResource "CiliumConfig").data.crt }}\n          key: {{ (getResource "CiliumConfig").data.key }}\n      cluster:\n        id: {{ (getResource "CiliumConfig").data.id }}\n        name: {{ .Cluster.metadata.name }}\n      clustermesh:\n        apiserver:\n          replicas: 2\n          service:\n            type: NodePort\n            nodePort: {{ (getResource "CiliumConfig").data.nodePort }}\n          tls:\n            authMode: cluster\n            server:\n              extraDnsNames:\n                - "{{ .Cluster.metadata.name }}.mesh.cilium.io"\n        config:\n          clusters:\n          - address: ""\n            ips:\n            - {{ (getResource "CiliumConfig").data.peermeship }} # The Node IP of the available nodes or a resolvable hostname\n            name: {{ (getResource "CiliumConfig").data.peermeshname }}\n            port: {{ (getResource "CiliumConfig").data.peermeshport }}\n          enabled: true\n          domain: "mesh.cilium.io"\n        useAPIServer: true # This is required for the Cluster Mesh setup\n      kubeProxyReplacement: true\n      k8sServiceHost: {{ (getResource "CiliumConfig").data.k8sServiceHost }}\n      k8sServicePort: {{ (getResource "CiliumConfig").data.k8sServicePort }}\n      hubble:\n        enabled: true\n        peerService:\n          clusterDomain: cluster.local\n        relay:\n          enabled: true\n        tls:\n          auto:\n            certValidityDuration: 1095\n            enabled: true\n            method: helm\n        ui:\n          enabled: true\n      nodeinit:\n        enabled: true\n      ipam:\n        mode: cluster-pool\n        operator:\n          clusterPoolIPv4MaskSize: "24"\n          clusterPoolIPv4PodCIDRList:\n            - {{ (getResource "CiliumConfig").data.clusterPoolIPv4PodCIDRList }}\n      nodePort:\n        enabled: true\n      debug:\n        enabled: true\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"ClusterProfile"})," will get deployed to the ",(0,s.jsx)(t.strong,{children:"managed"})," clusters with the label set to ",(0,s.jsx)(t.code,{children:"cilium:zone01"}),". Once a cluster is found, we instruct Sveltos to use the ",(0,s.jsx)(t.code,{children:"templateResourceRefs"})," capability and use the details found in the ",(0,s.jsx)(t.code,{children:"ConfgiMap"})," with the name set to ",(0,s.jsx)(t.code,{children:"cilium-config-{{ .Cluster.metadata.name }}"}),". This will match the ",(0,s.jsx)(t.code,{children:"cilium-config-mesh01"})," and ",(0,s.jsx)(t.code,{children:"cilium-config-mesh02"})," ConfigMap. Then, we instruct Sveltos to install the Cilium Helm chart v1.15.6."]}),"\n",(0,s.jsxs)(t.p,{children:["For the Cilium Helm chart instantiation, we go through the ",(0,s.jsx)(t.code,{children:"ConfigMap"})," and populate the ",(0,s.jsx)(t.code,{children:"values"})," based on the ",(0,s.jsx)(t.code,{children:"key"})," definition."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["We deploy a Cilium cluster mesh with a ",(0,s.jsx)(t.code,{children:"common TLS"})," certificate and a ",(0,s.jsx)(t.code,{children:"NodePort"})," service. For the production environment, it is recommended to deploy a ",(0,s.jsx)(t.code,{children:"LoadBalancer"})," setup. The above template can be used by updating the ",(0,s.jsx)(t.code,{children:"clustermesh.service.type=LoadBalancer"})," and setting the standard service ",(0,s.jsx)(t.code,{children:"Port"}),"."]})}),"\n",(0,s.jsx)(t.h3,{id:"deploy-clusterprofile-management-cluster",children:"Deploy ClusterProfile Management Cluster"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ export KUBECONFIG=<Sveltos managament cluster> \n\n$ kubectl apply -f clusterprofile_mesh01.yaml,clusterprofile_mesh02.yaml\n"})}),"\n",(0,s.jsx)(t.h2,{id:"step-4-validate-results",children:"Step 4: Validate Results"}),"\n",(0,s.jsx)(t.h3,{id:"validation---sveltosctl",children:"Validation - sveltosctl"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ ./sveltosctl show addons                                     \n+-------------+---------------+-------------+--------+---------+--------------------------------+-----------------------------------+\n|   CLUSTER   | RESOURCE TYPE |  NAMESPACE  |  NAME  | VERSION |              TIME              |             PROFILES              |\n+-------------+---------------+-------------+--------+---------+--------------------------------+-----------------------------------+\n| civo/mesh01 | helm chart    | kube-system | cilium | 1.15.6  | 2024-08-10 22:38:33 +0200 CEST | ClusterProfile/cilium-1156-zone01 |\n| civo/mesh02 | helm chart    | kube-system | cilium | 1.15.6  | 2024-08-10 22:38:55 +0200 CEST | ClusterProfile/cilium-1156-zone02 |\n+-------------+---------------+-------------+--------+---------+--------------------------------+-----------------------------------+\n"})}),"\n",(0,s.jsx)(t.h3,{id:"validation---mesh01",children:"Validation - mesh01"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'$ kubectl exec -it -n kube-system cilium-888jc -c cilium-agent -- cilium-dbg troubleshoot clustermesh mesh02\nFound 1 remote cluster configurations\nTroubleshooting filtered subset of clusters: mesh02\n\nRemote cluster "mesh02":\n\ud83d\udcc4 Configuration path: /var/lib/cilium/clustermesh/mesh02\n\n\ud83d\udd0c Endpoints:\n   - https://mesh02.mesh.cilium.io:32380\n     \u2705 Hostname resolved to: 192.168.x.x\n     \u2705 TCP connection successfully established to 192.168.x.x:32380\n     \u2705 TLS connection successfully established to 192.168.x.x:32380\n     \u2139\ufe0f  Negotiated TLS version: TLS 1.3, ciphersuite TLS_AES_128_GCM_SHA256\n     \u2139\ufe0f  Etcd server version: 3.5.14\n\n\ud83d\udd11 Digital certificates:\n   \u2705 TLS Root CA certificates:\n      - Serial number:       2c:b4:43:9c:fb:82:62:4f:55:0f:eb:5e:a4:fe:af:5e:14:95:18:74\n        Subject:             CN=Cilium LAB CA\n        Issuer:              CN=Cilium LAB CA\n        Validity:\n          Not before:  2024-04-25 14:04:31 +0000 UTC\n          Not after:   2034-04-23 14:04:31 +0000 UTC\n   \u2705 TLS client certificates:\n      - Serial number:       13:8f:38:4e:e9:08:bb:81:93:20:ff:30:33:ed:fb:13\n        Subject:             CN=remote-mesh01\n        Issuer:              CN=Cilium LAB CA\n        Validity:\n          Not before:  2024-08-10 20:53:31 +0000 UTC\n          Not after:   2027-08-10 20:53:31 +0000 UTC\n\n\u2699\ufe0f Etcd client:\n   \u2705 Etcd connection successfully established\n   \u2139\ufe0f  Etcd cluster ID: 820847063f6cabce\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"validation---mesh02",children:"Validation - mesh02"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'$ kubectl exec -it -n kube-system cilium-94ddz -c cilium-agent -- cilium-dbg troubleshoot clustermesh mesh01\nFound 1 remote cluster configurations\nTroubleshooting filtered subset of clusters: mesh01\n\nRemote cluster "mesh01":\n\ud83d\udcc4 Configuration path: /var/lib/cilium/clustermesh/mesh01\n\n\ud83d\udd0c Endpoints:\n   - https://mesh01.mesh.cilium.io:32379\n     \u2705 Hostname resolved to: 192.168.x.x\n     \u2705 TCP connection successfully established to 192.168.x.x:32379\n     \u2705 TLS connection successfully established to 192.168.x.x:32379\n     \u2139\ufe0f  Negotiated TLS version: TLS 1.3, ciphersuite TLS_AES_128_GCM_SHA256\n     \u2139\ufe0f  Etcd server version: 3.5.14\n\n\ud83d\udd11 Digital certificates:\n   \u2705 TLS Root CA certificates:\n      - Serial number:       2c:b4:43:9c:fb:82:62:4f:55:0f:eb:5e:a4:fe:af:5e:14:95:18:74\n        Subject:             CN=Cilium LAB CA\n        Issuer:              CN=Cilium LAB CA\n        Validity:\n          Not before:  2024-04-25 14:04:31 +0000 UTC\n          Not after:   2034-04-23 14:04:31 +0000 UTC\n   \u2705 TLS client certificates:\n      - Serial number:       94:02:e1:4a:b8:74:4c:d7:62:af:c1:d8:19:a8:3b:8f\n        Subject:             CN=remote-mesh02\n        Issuer:              CN=Cilium LAB CA\n        Validity:\n          Not before:  2024-08-10 20:59:07 +0000 UTC\n          Not after:   2027-08-10 20:59:07 +0000 UTC\n\n\u2699\ufe0f Etcd client:\n   \u2705 Etcd connection successfully established\n   \u2139\ufe0f  Etcd cluster ID: 21f7360bef94b707\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Cilium cluster mesh is deployed in ",(0,s.jsx)(t.strong,{children:"one run"})," without the need for an additional Infrastructure as Code (IaC) tool or additional rendering!"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i.kym-cdn.com/entries/icons/original/000/045/269/ebdn.jpg",alt:'title image reading "Michael Scott Dance - Reference: Phillip Hamilton - https://knowyourmeme.com/memes/michael-scott-with-speaker-everybody-dance-now"'})}),"\n",(0,s.jsx)(t.h2,{id:"sveltos-templating-benefits",children:"Sveltos Templating Benefits"}),"\n",(0,s.jsxs)(t.p,{children:["Sveltos templating enables users to utilise the ",(0,s.jsx)(t.strong,{children:"same add-on configuration"})," across different clusters while allowing variations like different add-on configuration values."]}),"\n",(0,s.jsxs)(t.p,{children:["Sveltos lets users define add-ons and applications in a ",(0,s.jsx)(t.strong,{children:"reusable"})," way. We can deploy the definitions across ",(0,s.jsx)(t.strong,{children:"multiple"})," clusters with ",(0,s.jsx)(t.strong,{children:"minor adjustments"}),". The approach saves ",(0,s.jsx)(t.strong,{children:"time"}),", ",(0,s.jsx)(t.strong,{children:"effort"}),", and ",(0,s.jsx)(t.strong,{children:"headaches"}),", especially in large-scale environments."]}),"\n",(0,s.jsx)(t.h2,{id:"conclusions",children:"Conclusions"}),"\n",(0,s.jsx)(t.p,{children:"In a couple of minutes and with a minimal configuration effort we formed a cluster mesh between two Kubernetes clusters. This is the power of Sveltos templating."}),"\n",(0,s.jsxs)(t.p,{children:["If you want to explore a step-by-step guide on how to setup a Cilium cluster mesh, have a look at my previous blog post ",(0,s.jsx)(t.a,{href:"/personal-blog/blog/cilium-cluster-mesh-rke2",children:"here"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"\ufe0f-contact",children:"\u2709\ufe0f Contact"}),"\n",(0,s.jsxs)(t.p,{children:["We are here to help! Whether you have questions, or issues or need assistance, our Slack channel is the perfect place for you. Click here to ",(0,s.jsx)(t.a,{href:"https://app.slack.com/client/T0471SNT5CZ/C06UZCXQLGP",children:"join us"})," us."]}),"\n",(0,s.jsx)(t.h2,{id:"-support-thisproject",children:"\ud83d\udc4f Support this\xa0project"}),"\n",(0,s.jsxs)(t.p,{children:["Every contribution counts! If you enjoyed this article, check out the Projectsveltos ",(0,s.jsx)(t.a,{href:"https://github.com/projectsveltos",children:"GitHub repo"}),". You can ",(0,s.jsx)(t.a,{href:"https://github.com/projectsveltos",children:"star \ud83c\udf1f the project"})," if you find it helpful."]}),"\n",(0,s.jsx)(t.p,{children:"The GitHub repo is a great resource for getting started with the project. It contains the code, documentation, and many more examples."}),"\n",(0,s.jsx)(t.p,{children:"Thanks for reading!"})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},2559:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/Sveltos_Templating_Cilium-2b893e8b722fbbacf6940994c1a67404.jpg"},8208:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/Sveltos_Templating_Cilium-2b893e8b722fbbacf6940994c1a67404.jpg"},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(6540);const i={},l=s.createContext(i);function o(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);